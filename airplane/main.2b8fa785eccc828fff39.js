(()=>{"use strict";function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var i=function(){function i(t,e,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.img=t,this.totalFrame=8,this.curFrame=0,this.imgWidth=360,this.imgHeight=300,this.airplaneWidth=180,this.airplaneHeight=150,this.airplaneWidthHalf=this.airplaneWidth/2,this.airplaneHeightHalf=this.airplaneHeight/2,this.x=e+this.airplaneWidth,this.y=s+this.airplaneHeight,this.fps=24,this.fpsTime=1e3/this.fps,this.percent=0,this.path}var e,s,a;return e=i,(s=[{key:"animate",value:function(t,i,e,s){return this.time||(this.time=i),i-this.time>this.fpsTime&&(this.time=i,this.curFrame+=1,this.curFrame==this.totalFrame&&(this.curFrame=0)),this.percent+=s,this.percent<0&&(this.percent=0),100==this.percent&&(this.percent=0),e?(this.draw(t,e,this.percent),this.percent):this.percent}},{key:"draw",value:function(t,i,e){var s=this.getQuadBezierPoint(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3,e);this.drawAirplane(t,s)}},{key:"drawAirplane",value:function(t,i){t.save(),t.translate(i.x,i.y),t.rotate(i.rotation),t.drawImage(this.img,this.imgWidth*this.curFrame,0,this.imgWidth,this.imgHeight,-this.airplaneWidthHalf,-this.airplaneHeightHalf,this.airplaneWidth,this.airplaneHeight),t.restore()}},{key:"getQuadBezierPoint",value:function(t,i,e,s,a,n,h){h/=100;var r=this.getQuadBezierValue(t,e,a,h),o=this.getQuadBezierValue(i,s,n,h),c=this.quadTangent(t,e,a,h),l=this.quadTangent(i,s,n,h);return{x:r,y:o,rotation:-Math.atan2(c,l)+270*Math.PI/180}}},{key:"getQuadBezierValue",value:function(t,i,e,s){return Math.pow(1-s,2)*t+2*(1-s)*s*i+Math.pow(s,2)*e}},{key:"quadTangent",value:function(t,i,e,s){return 2*(1-s)*(i-t)+2*(e-i)*s}}])&&t(e.prototype,s),a&&t(e,a),i}();function e(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var s=function(){function t(){var i=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.img=new Image,this.img.onload=function(){i.loaded()},this.img.src="airplane_blue.png",this.cur=0,this.speed=.25,this.isLoaded=!1}var s,a,n;return s=t,(a=[{key:"resize",value:function(t,i){this.stageWidth=t,this.stageHeight=i}},{key:"loaded",value:function(){this.isLoaded=!0,this.addAirplane()}},{key:"addAirplane",value:function(){this.airplane=new i(this.img,this.stageWidth,this.stageHeight)}},{key:"draw",value:function(t,i,e){return this.isLoaded&&this.airplane.animate(t,i,e[this.cur],this.speed)==100-this.speed&&this.cur++,this.cur==e.length}}])&&e(s.prototype,a),n&&e(s,n),t}();function a(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(i,e,a,n,h){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=a,this.ctx=i,this.stageWidth=n,this.stageHeight=h,this.points=[],this.margin=400,this.min=0,this.max=1,this.randomDirection=Math.random()*(this.max-this.min)+this.min,this.minimumSize=100,this.initialSize=this.getSize(),this.airplaneController=new s}var i,e,n;return i=t,(e=[{key:"draw",value:function(t,i,e,s){this.points=this.getGoldenSpiralPoints(),t.fillStyle="rgba(255, 255, 255, 0.9)",t.strokeStyle="rgba(255, 255, 255, 0.9)",t.lineWidth=5,Boolean;for(var a=0;a<this.points.length;a++)this.points[a].x1,this.points[a].y1,this.points[a].x2,this.points[a].y2,this.points[a].x3,this.points[a].y3;return this.airplaneController.draw(t,i,this.points)}},{key:"resize",value:function(t,i){return this.stageWidth=t,this.stageHeight=i,this.points=this.getGoldenSpiralPoints(),this.airplaneController.resize(this.stageWidth,this.stageHeight),this.points}},{key:"getGoldenSpiralPoints",value:function(){for(var t=[],i=this.initialSize,e=1,s=0,a=0,n=this.x,h=this.y,r=n,o=h,c=n,l=h,u=n,d=h,g=0;r<this.stageWidth+this.margin&&r>-this.margin&&o<this.stageHeight+this.margin&&o>-this.margin;)if(0===t.length){var p=this.randomDirection;n<=this.stageWidth/2&&h<=this.stageHeight/2&&(r=this.stageWidth+this.margin,o=(this.stageHeight+this.margin)*p,c=n,l=this.stageHeight,u=n,d=h),n>this.stageWidth/2&&h<=this.stageHeight/2&&(r=-this.margin,o=(this.stageHeight+this.margin)*p,c=n,l=this.stageHeight,u=n,d=h),n<=this.stageWidth/2&&h>this.stageHeight/2&&(r=this.stageWidth+this.margin,o=(this.stageHeight+this.margin)*p,c=n,l=this.stageHeight,u=n,d=h),n>this.stageWidth/2&&h>this.stageHeight/2&&(r=-this.margin,o=(this.stageHeight+this.margin)*p,c=n,l=this.stageHeight,u=n,d=h),t.push({x1:r,y1:o,x2:c,y2:l,x3:u,y3:d}),r=n,o=h}else{if(e>4&&(e=1),a=i+s,0===g)r=n,o=h,c=n,l=h-i,u=n+i,d=h-i;else{switch(e){case 1:r=n,o=h,c=n+a,l=h,u=n+a,d=h+a;break;case 2:r=n,o=h,c=n,l=h+a,u=n-a,d=h+a;break;case 3:r=n,o=h,c=n-a,l=h,u=n-a,d=h-a;break;case 4:r=n,o=h,c=n,l=h-a,u=n+a,d=h-a}e++}t.push({x1:r,y1:o,x2:c,y2:l,x3:u,y3:d}),n=u,h=d,i=s,s=a,g++}return t}},{key:"getSize",value:function(){var t=this.minimumSize,i=15*t;return t+Math.random()*i}}])&&a(i.prototype,e),n&&a(i,n),t}();function h(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Math.PI;var r=function(){function t(i,e,s,a){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.speed=s,this.x=i,this.y=e,this.radius=a}var i,e,s;return i=t,(e=[{key:"resize",value:function(t,i){this.stageWidth=t,this.stageHeight=i}},{key:"draw",value:function(t){this.x+=this.speed,t.fillStyle="rgba(255,255,255,0.2)",t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.closePath(),t.fill()}}])&&h(i.prototype,e),s&&h(i,s),t}();function o(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var c=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.clouds=[],this.cur=0,this.total=80,this.isLoaded=!1,this.max=200,this.addCloud()}var i,e,s;return i=t,(e=[{key:"resize",value:function(t,i){this.stageWidth=t,this.stageHeight=i}},{key:"loaded",value:function(){this.isLoaded=!0,this.addCloud()}},{key:"addCloud",value:function(){var t=this.cloudConditions();this.clouds.push(new r(t.x,t.y,t.speed,t.radius))}},{key:"draw",value:function(t){this.cur+=1,this.cur<this.total&&this.addCloud();for(var i=0;i<this.clouds.length;i++){var e=this.clouds[i];e.x>this.stageWidth+this.max?(this.clouds.splice(i,1),this.addCloud()):e.draw(t)}}},{key:"cloudConditions",value:function(){var t,i,e=this.stageHeight*Math.random(),s=Math.random()*this.max;return this.cur%2==0?(t=0-this.max,i=2*Math.random()):(t=this.stageWidth+this.max,i=2*-Math.random()),{x:t,y:e,speed:i,radius:s}}}])&&o(i.prototype,e),s&&o(i,s),t}();function l(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var u=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.light="#89cff0",this.dark="#00a3e0"}var i,e,s;return i=t,(e=[{key:"backgroundColor",value:function(t){t.length>0?(document.body.style.backgroundColor=this.light,document.body.style.transition="all 3s"):(document.body.style.backgroundColor=this.dark,document.body.style.transition="all 3s")}}])&&l(i.prototype,e),s&&l(i,s),t}();function d(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var g=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.backBtn=document.createElement("div"),this.backBtn.classList.add("back-btn"),this.backA=document.createElement("a"),this.backA.classList.add("back-btn__link"),this.backA.setAttribute("href","/"),this.backSvg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.backSvg.classList.add("back-btn__svg"),this.backSvg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.backSvg.setAttributeNS(null,"viewBox","0 0 24 24"),this.backPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.backPath.setAttributeNS(null,"d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"),this.backSpan=document.createElement("span"),this.backSpan.classList.add("back-btn__text"),this.backSpan.innerHTML="Back to noon",this.backSvg.appendChild(this.backPath),this.backA.append(this.backSvg,this.backSpan),this.backBtn.appendChild(this.backA),document.body.appendChild(this.backBtn),this.instruction=document.createElement("div"),this.instruction.classList.add("instruction","hidden","visuallyhidden"),this.instructionSvg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.instructionSvg.classList.add("instruction__svg"),this.instructionSvg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.instructionSvg.setAttributeNS(null,"viewBox","0 0 24 24"),this.instructionPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.instructionPath.setAttributeNS(null,"d","M18.19,12.44l-3.24-1.62c1.29-1,2.12-2.56,2.12-4.32c0-3.03-2.47-5.5-5.5-5.5s-5.5,2.47-5.5,5.5c0,2.13,1.22,3.98,3,4.89 v3.26c-2.15-0.46-2.02-0.44-2.26-0.44c-0.53,0-1.03,0.21-1.41,0.59L4,16.22l5.09,5.09C9.52,21.75,10.12,22,10.74,22h6.3 c0.98,0,1.81-0.7,1.97-1.67l0.8-4.71C20.03,14.32,19.38,13.04,18.19,12.44z M17.84,15.29L17.04,20h-6.3 c-0.09,0-0.17-0.04-0.24-0.1l-3.68-3.68l4.25,0.89V6.5c0-0.28,0.22-0.5,0.5-0.5c0.28,0,0.5,0.22,0.5,0.5v6h1.76l3.46,1.73 C17.69,14.43,17.91,14.86,17.84,15.29z M8.07,6.5c0-1.93,1.57-3.5,3.5-3.5s3.5,1.57,3.5,3.5c0,0.95-0.38,1.81-1,2.44V6.5 c0-1.38-1.12-2.5-2.5-2.5c-1.38,0-2.5,1.12-2.5,2.5v2.44C8.45,8.31,8.07,7.45,8.07,6.5z"),this.instructionSvg.appendChild(this.instructionPath),this.instruction.appendChild(this.instructionSvg),document.body.appendChild(this.instruction),this.mouseCursor=document.createElement("div"),this.mouseCursor.className="cursor",document.body.appendChild(this.mouseCursor),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.logo=document.createElement("IMG"),this.logo.classList.add("logo"),this.logo.setAttribute("src","klm_logo_white.png"),this.logo.setAttribute("alt","KLM Logo"),document.body.appendChild(this.logo),this.paths=[],this.cloudController=new c,this.background=new u,this.pixelRatio=window.devicePixelRatio>1?2:1,document.addEventListener("pointermove",this.onMove.bind(this),!1),window.addEventListener("pointerup",this.onUp.bind(this),!1),window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),requestAnimationFrame(this.animate.bind(this))}var i,e,s;return i=t,(e=[{key:"resize",value:function(){this.stageWidth=document.body.clientWidth,this.stageHeight=document.body.clientHeight,this.canvas.width=this.stageWidth*this.pixelRatio,this.canvas.height=this.stageHeight*this.pixelRatio,this.ctx.scale(this.pixelRatio,this.pixelRatio),this.background.backgroundColor(this.paths),this.cloudController.resize(this.stageWidth,this.stageHeight);for(var t=0;t<this.paths.length;t++)this.paths[t].resize(this.stageWidth,this.stageHeight);this.showInstruction()}},{key:"showInstruction",value:function(){var t;clearInterval(t),t=setInterval(function(){setTimeout(function(){this.instruction.style.transform="translate(".concat(this.stageWidth*Math.random(),"px, ").concat(this.stageHeight*Math.random(),"px)")}.bind(this),1e3)}.bind(this),1e3),this.instruction.classList.remove("hidden"),setTimeout(function(){this.instruction.classList.remove("visuallyhidden")}.bind(this),1e3),setTimeout(function(){this.instruction.classList.add("visuallyhidden")}.bind(this),8e3),setTimeout(function(){this.instruction.classList.add("hidden"),clearInterval(t)}.bind(this),8500)}},{key:"animate",value:function(t){requestAnimationFrame(this.animate.bind(this)),this.ctx.clearRect(0,0,this.stageWidth,this.stageHeight),Boolean,this.background.backgroundColor(this.paths),this.paths.length>0&&this.cloudController.draw(this.ctx);for(var i=0;i<this.paths.length;i++)this.paths[i].draw(this.ctx,t)&&this.paths.splice(i,1)}},{key:"onUp",value:function(t){var i=t.clientX,e=t.clientY;this.paths.push(new n(this.ctx,i,e,this.stageWidth,this.stageHeight)),this.background.backgroundColor(this.paths)}},{key:"onMove",value:function(t){this.mouseCursor.style.transform="translate(".concat(t.clientX-this.mouseCursor.offsetWidth/2,"px, ").concat(t.clientY-this.mouseCursor.offsetHeight/2,"px)")}}])&&d(i.prototype,e),s&&d(i,s),t}();window.onload=function(){new g}})();
//# sourceMappingURL=main.2b8fa785eccc828fff39.js.map